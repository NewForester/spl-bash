#!/bin/bash --posix

##
##  Goal:   semi-automate system configuration of applications
##
##  Use:    source sysconf-lang
##
##  NB:     The caller must source functions etc Ã  la sysconf script.
##

function defineSteps
{
    local major="$1"; shift;
    local minor=0;

    minor=$((minor+1));
    buildEssential=$major.$minor;
}

function langConf
{
    local major="$1"; shift;
    defineSteps $major;

    case "$1" in
      ($major | build)
        listOptions sysconf-lang "$1";
        quit;
        ;;

      ($buildEssential | buildEssential)
        step="$buildEssential buildEssential";
        note "Install C/C++ compiler and man pages 2 & 3";

        installPackage manpages-dev build-essential ccache;
        ;;

      ($major.99)
        step="$major.99 sanityCheck";
        note "Checking apps ...";
        listLoggedSteps $major | while read step name status; do
            printf "%-7s %-23s %s\n" $step $name $status;
            case "$installDist $name" in
              (*buildEssential)
                CheckCurrent /etc/{passwd,group};
                ;;
            esac
        done
        quit;
        ;;

      (*)
        badOption "$1";
        listOptions sysconf-lang $major;
        quit 1;
        ;;
    esac
}

### Local Variables: ***
### mode:ksh ***
### End: ***
